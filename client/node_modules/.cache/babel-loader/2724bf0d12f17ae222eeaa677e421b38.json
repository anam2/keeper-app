{"ast":null,"code":"import _defineProperty from\"/Users/andynam/Code/react/keeper-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/andynam/Code/react/keeper-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/andynam/Code/react/keeper-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Redirect}from\"react-router-dom\";import{Container,TextField,Button,Grid,CssBaseline,Avatar}from\"@material-ui/core\";import HighlightIcon from\"@material-ui/icons/Highlight\";import Header from\"./Header\";import Footer from\"./Footer\";import axios from\"axios\";function Home(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),correctLogin=_useState2[0],setCorrectLogin=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setRedirect=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),users=_useState6[0],setUsers=_useState6[1];var _useState7=useState({username:\"\",password:\"\"}),_useState8=_slicedToArray(_useState7,2),userInput=_useState8[0],setUserInput=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),currentUserId=_useState10[0],setCurrentUserId=_useState10[1];// Get's list of users from db\nuseEffect(function(){setTimeout(function(){axios.get(\"/user\").then(function(response){setUsers(response.data);},1000);});},[]);// Updates react hook with user inputted values\nfunction handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUserInput(function(prevInfo){return _objectSpread(_objectSpread({},prevInfo),{},_defineProperty({},name,value));});}// Checking to see if current user's log info exists in db\nfunction logIn(e){e.preventDefault();var currentUser=users.find(function(users){return users.username===userInput.username;});// User does not exist\nif(!currentUser){setCorrectLogin(false);return;}else if(currentUser.password===userInput.password){setCurrentUserId(currentUser._id);setRedirect(true);}else{// User information doesn't match what's in DB\nsetCorrectLogin(false);return;}}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"form\",{className:\"signInArea\"},/*#__PURE__*/React.createElement(Avatar,null,/*#__PURE__*/React.createElement(HighlightIcon,null)),/*#__PURE__*/React.createElement(\"h1\",null,\"Sign In\"),/*#__PURE__*/React.createElement(TextField,{autoFocus:true,fullWidth:true,label:\"Username\",margin:\"normal\",name:\"username\",onChange:handleChange,required:true,variant:\"outlined\"}),/*#__PURE__*/React.createElement(TextField,{fullWidth:true,label:\"Password\",margin:\"normal\",name:\"password\",onChange:handleChange,required:true,type:\"password\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(Button,{fullWidth:true,variant:\"contained\",onClick:logIn},\"Sign In\",redirect?/*#__PURE__*/React.createElement(Redirect,{to:\"/note/\"+currentUserId}):null),correctLogin?null:/*#__PURE__*/React.createElement(\"p\",{className:\"loginInfo\"},\"The account may have not been created or your login information is not correct. Please try again!\"),/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(\"a\",{href:\"/create\"},\"Don't have an account? Sign up!\"))))),/*#__PURE__*/React.createElement(Footer,null));}export default Home;","map":{"version":3,"sources":["/Users/andynam/Code/react/keeper-app/client/src/components/Home.jsx"],"names":["React","useState","useEffect","Redirect","Container","TextField","Button","Grid","CssBaseline","Avatar","HighlightIcon","Header","Footer","axios","Home","correctLogin","setCorrectLogin","redirect","setRedirect","users","setUsers","username","password","userInput","setUserInput","currentUserId","setCurrentUserId","setTimeout","get","then","response","data","handleChange","e","target","name","value","prevInfo","logIn","preventDefault","currentUser","find","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport {\n  Container,\n  TextField,\n  Button,\n  Grid,\n  CssBaseline,\n  Avatar,\n} from \"@material-ui/core\";\nimport HighlightIcon from \"@material-ui/icons/Highlight\";\n\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport axios from \"axios\";\n\nfunction Home() {\n  const [correctLogin, setCorrectLogin] = useState(true);\n  const [redirect, setRedirect] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [userInput, setUserInput] = useState({\n    username: \"\",\n    password: \"\",\n  });\n  const [currentUserId, setCurrentUserId] = useState();\n\n  // Get's list of users from db\n  useEffect(() => {\n    setTimeout(() => {\n      axios.get(\"/user\").then((response) => {\n        setUsers(response.data);\n      }, 1000);\n    });\n  }, []);\n\n  // Updates react hook with user inputted values\n  function handleChange(e) {\n    const { name, value } = e.target;\n\n    setUserInput((prevInfo) => {\n      return {\n        ...prevInfo,\n        [name]: value,\n      };\n    });\n  }\n\n  // Checking to see if current user's log info exists in db\n  function logIn(e) {\n    e.preventDefault();\n    const currentUser = users.find(\n      (users) => users.username === userInput.username\n    );\n\n    // User does not exist\n    if (!currentUser) {\n      setCorrectLogin(false);\n      return;\n    } else if (currentUser.password === userInput.password) {\n      setCurrentUserId(currentUser._id);\n      setRedirect(true);\n    } else {\n      // User information doesn't match what's in DB\n      setCorrectLogin(false);\n      return;\n    }\n  }\n\n  return (\n    <div>\n      <Header />\n      {/* Material UI */}\n      <Container component=\"main\" maxWidth=\"xs\">\n        <CssBaseline />\n        <form className=\"signInArea\">\n          <Avatar>\n            <HighlightIcon />\n          </Avatar>\n          <h1>Sign In</h1>\n          <TextField\n            autoFocus\n            fullWidth\n            label=\"Username\"\n            margin=\"normal\"\n            name=\"username\"\n            onChange={handleChange}\n            required\n            variant=\"outlined\"\n          />\n          <TextField\n            fullWidth\n            label=\"Password\"\n            margin=\"normal\"\n            name=\"password\"\n            onChange={handleChange}\n            required\n            type=\"password\"\n            variant=\"outlined\"\n          />\n          <Button fullWidth variant=\"contained\" onClick={logIn}>\n            Sign In\n            {redirect ? <Redirect to={\"/note/\" + currentUserId} /> : null}\n          </Button>\n          {correctLogin ? null : (\n            <p className=\"loginInfo\">\n              The account may have not been created or your login information is\n              not correct. Please try again!\n            </p>\n          )}\n          <Grid container>\n            <Grid item>\n              <a href=\"/create\">{\"Don't have an account? Sign up!\"}</a>\n            </Grid>\n          </Grid>\n        </form>\n      </Container>\n      <Footer />\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}